<!DOCTYPE html>
<html>
<head>
  <meta charset="utf‑8">
  <title>批量查询 Solana 余额</title>
</head>
<body>
  <h2>批量查询 Solana 地址余额</h2>
  <textarea id="addresses" rows="8" cols="60" placeholder="每行一个地址"></textarea><br>
  <button id="query">查询余额</button>
  <pre id="output"></pre>

  <script>
    const rpcUrl = 'https://s.1b.tc/888/solana';  // 替换成你实际的 RPC 接口

    document.getElementById('query').onclick = async () => {
      const raw = document.getElementById('addresses').value.trim();
      if (!raw) {
        alert('请输入至少一个地址');
        return;
      }

      const addresses = raw.split(/\\s+/);
      const requests = addresses.map((addr, idx) => ({
        jsonrpc: "2.0",
        id: idx + 1,
        method: "getBalance",
        params: [addr]
      }));

      try {
        const resp = await fetch(rpcUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(requests)
        });

        if (!resp.ok) throw new Error('网络错误：' + resp.status);

        const results = await resp.json();
        const out = results.map(r => {
          const addr = addresses[r.id - 1];
          if (r.error) return `${addr} → 错误: ${r.error.message}`;
          // 返回的是 lamports，1 SOL = 1e9 lamports
          const sol = r.result.value / 1e9;
          return `${addr} → ${sol} SOL`;
        }).join('\\n');

        document.getElementById('output').textContent = out;
      } catch (err) {
        document.getElementById('output').textContent = '请求失败：' + err;
      }
    };
  </script>
</body>
</html>
